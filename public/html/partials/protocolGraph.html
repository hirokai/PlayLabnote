
<div class='row'>
    <div class='col-md-8'>
        <div id='graph_buttons'>
            <div>
                <span class='btnlabel'>For sample:</span>
                <button id='newsamplebtn' class="btn btn-xs btn-default" type="button" ng-click='addPSample()'
                {{disabled_if_locked}}>New sample</button>
                <button id='deletesamplebtn' class="btn btn-xs btn-default" ng-click='deletePSamples()'
                        ng-disabled='selectedPSamples.length == 0' {{disabled_if_locked}} type="button">Delete</button>
            </div>
            <div>

                <span class='btnlabel'>For sample:</span>
                <button id='addprevstepbtn' class="btn btn-xs btn-default" ng-click='addPrevStep()'
                        ng-disabled='selectedPSamples.length != 1' {{disabled_if_locked}} type="button">Add prev step</button>
                <button id='addnextstepbtn' class="btn btn-xs btn-default" ng-click='addNextStep()'
                        ng-disabled='selectedPSamples.length != 1' {{disabled_if_locked}} type="button">Add next step</button>
            </div>
            <div>
                <span class='btnlabel'>For two samples:</span>
                <a id='connectnodes' class="btn btn-xs btn-default" ng-disabled='selectedPSamples.length != 2' ng-click='connectNodes()'
                {{disabled_if_locked}} type="button">Connect nodes</a>
                <button id='insertnode' class="btn btn-xs btn-default" ng-disabled='selectedPSamples.length != 2'
                {{disabled_if_locked}} type="button">Insert</button>
            </div>
            <div>
                <span class='btnlabel'>For operation:</span>
                <button id='newinputbtn' class="btn btn-xs btn-default" ng-click='newInput()'
                        ng-disabled='selectedPSteps.length != 1' {{disabled_if_locked}} type="button">New input</button>
                <button id='newoutputbtn' class="btn btn-xs btn-default" ng-click='newOutput()'
                        ng-disabled='selectedPSteps.length != 1' {{disabled_if_locked}} type="button">New output</button>
                <button id='deleteopbtn' class="btn btn-xs btn-default" ng-click='deleteStep()'
                        ng-disabled='selectedPSteps.length == 0' type="button">Delete</button>
            </div>
            <div style='margin: 8px 0px;'>
                <button id='deselect' class="btn btn-xs btn-default" type="button" ng-click='selectNone()'>Select none</button>
                <button id='resetzoom' class="btn btn-xs btn-default" type="button" ng-click='resetZoom()'>Reset zoom</button>
            </div>
            <div style='margin: 8px 0px;'>
                <input type="checkbox" id='shrink_nodes' ng-model='shrinkNodes.val'/>
                <span style='font-size: 12px'>Shrink intermediate samples</span>
            </div>

        </div>
        <div id='protocol_graph_wrapper'>
            <svg id='protocol_graph'>
            </svg>
        </div>
    </div>
    <div class='col-md-4'>

        <span>
            <div ng-show='!selectedEntities.length'>
                (Not selected)
            </div>
            <div ng-show='selectedEntities.length > 1'>
                (Multiple selection)
            </div>
            <div ng-show='selectedEntities[0].typ && selectedEntities.length == 1'>
                <h5>Sample</h5>
                <div>
                    Name: <input type="text" ng-disabled='selectedEntities.length != 1' ng-model='selectedEntities[0].name' ng-model-options="{ updateOn: 'blur' }"/>
                </div>
                <div>
                    Sample type: <select ng-model="selectedEntities[0].typ"
                                         ng-change='' ng-options="type as type.name for type in types"></select>
                </div>
            </div>
            <div ng-show='selectedEntities[0].params && selectedEntities.length == 1'>
                <h5>Step</h5>
                <div>
                    Name: <input type="text" ng-disabled='selectedEntities.length != 1' ng-model='selectedEntities[0].name' ng-model-options="{ updateOn: 'blur' }"/>
                </div>
                <div><h5>Input and output</h5>
                    Input: {{selectedEntities[0].input}}<br>
                    Output: {{selectedEntities[0].output}}

                </div>

                <div>
                    <h5>Params</h5>
                    <input type="checkbox" ng-model='editingParams'/> Editing
                    <table class="table">
                        <thead>
                        <tr>
                            <th></th>
                            <th>Name</th>
                            <th>Type/Unit</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat='param in selectedEntities[0].params' ng-controller='PStepParamCtrl'>
                            <td>
                                <a class='btn btn-xs btn-default' ng-if='editingParams' ng-click='deleteParam(param)'><span class='glyphicon glyphicon-minus'></span></a>
                            </td>
                            <td ng-if='editingParams'><input type="text" ng-model='param.name' ng-model-options="{ updateOn: 'blur' }"/></td>
                            <td ng-if='!editingParams'>{{param.name}}</td>
                            <td ng-if='editingParams'>
                                <select ng-model="param.type_unit" ng-options='unit.value as unit.name for unit in units'></select>
                            </td>
                            <td ng-if='!editingParams'>{{getParamUnitName(param.type_unit)}}</td>
                        </tr>
                        <tr ng-if='editingParams'>
                            <td><a class='btn btn-xs btn-default' ng-click='addParam()'><span class='glyphicon glyphicon-plus'></span></a></td>
                            <td></td>
                            <td></td>
                        </tr>
                        </tbody>
                    </table>
                    <!--<pre class="json">{{selectedEntities[0].params|json}}</pre>-->
                </div>
            </div>
        </span>
        <!--<pre class="json">{{selectedEntities.length}} items. -> {{selectedEntities|json}}</pre>-->

    </div>
</div>
