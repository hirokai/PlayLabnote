<!DOCTYPE HTML>
<html lang="en" ng-app="expApp">
<head>
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/main.css">
    <link rel="stylesheet" media="screen" href="/assets/stylesheets/experiment.css">
    <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
    <meta charset="UTF-8">
    <title></title>
</head>
<body ng-cloak ng-controller='expAppCtrl' ng-init="init()">

    <a href="/exps">To List</a>

<input ng-if='editingTitle' type="text" ng-model='exp.name' ng-keydown='keyDownTitle($event)'/>
<h2 ng-if='!editingTitle' ng-dblclick='editTitle()'>{{exp.name}}</h2>

<table class='table'>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th ng-repeat='run in exp.runs' ng-click='clickRun(run,$event)'>{{run.name}}</th>
        <th><button class='btn btn-xs' ng-click='addRun()'>
            <span class='glyphicon glyphicon-plus'></span>
        </button></th>
    </tr>
    <tr ng-repeat='psample in exp.protocolSamples'>
        <td>
            {{psample.name}}
        </td>
        <td data-typeid='{{psample.typ.id}}'>{{psample.typ.name}}</td>
        <td ng-repeat='run in exp.runs'>
            <span ng-if='runSample(run.id,psample.id)' ng-click='clickRunSample(run.id,psample.id,$event)'>
                {{runSample(run.id, psample.id).name}}
            </span>
            <span ng-if='!runSample(run.id,psample.id)' ng-click='assignRunSample(run.id,psample.id)'>
                Add sample
            </span>
        </td>
        <td></td>
    </tr>
    <tr>
        <td><button class='btn btn-xs' ng-click='addPSample()'>
                    <span class='glyphicon glyphicon-plus'></span>
                </button></td>
    </tr>
</table>
<script type="text/javascript">
    data = {id: 1, runs: [], protocolSamples: [], runSamples: {}};
</script>

<script src="/assets/javascripts/underscore-min.js" type="text/javascript"></script>
<script src="/assets/javascripts/jquery-1.11.1.min.js" type="text/javascript"></script>
<script src="/assets/javascripts/bootstrap.min.js"s type="text/javascript"></script>
<script type="text/javascript" src='/assets/javascripts/angular.min.js'></script>
<script type="text/javascript" src='/assets/javascripts/exp_test.js'></script>
</body>

</html>
